title = "movie"
url = "/movies/:slug/:medium?"
layout = "default"
is_hidden = 0

[viewBag]
localeUrl[de] = "/filme/:slug/:medium?"
localeUrl[fr] = "/movies/:slug/:medium?"

[movieDetail]
slug = "{{ :slug }}"
medium = "{{ :medium }}"
==
<?php
use \ffte\movies\models\Movie;

function onInit() {
    $this['activeMenuItem'] = 'movies';
}
?>
==
<div class="background"></div>
<div class="row">
    <h1>{{movieDetail.movie.title}}</h1>
</div>
<div class="row">
    <div class="embed-responsive embed-responsive-16by9">
        <iframe class="embed-responsive-item" src="{{ video_src(movieDetail.medium) }}" allowfullscreen></iframe>
    </div>
</div>
<div class="row">
    {% for medium in movieDetail.movie.media %}
    <figure class="figure mt-1 mr-1">
        <a href="{{ 'movie'|page({slug: movie.slug, medium: medium.id}) }}" class="media-action">
            <img width="120px" src="{{ image_src(medium) }}" class="figure-img img-fluid" alt="A generic square placeholder image with rounded corners in a figure.">
        </a>
        <figcaption class="figure-caption ml-1">{{medium.title}}</figcaption>
    </figure>
    {% endfor %}
</div>

{% put styles %}
<style>
    .background:before {
        content: "";
        position: fixed;
        left: 0;
        right: 0;
        z-index: -1;

        display: block;
        background-image: url('{{movieDetail.movie.backgrounds[0].path}}');
        width: 100%;
        height: 100%;

        -webkit-filter: blur(10px);
        -moz-filter: blur(10px);
        -o-filter: blur(10px);
        -ms-filter: blur(10px);
        filter: blur(10px);
    }
</style>
{% endput %}

